import argparse

from dataset_conversion.reader.big_vul_reader import BigVulReader
from dataset_conversion.writer.big_vul_writer import BigVulWriter

if __name__ == "__main__":
    parser = argparse.ArgumentParser(
        prog='dataset-converter',
        description='Convert datasets for static code analyzers')
    parser.add_argument("--input-type", type=str, help="The type of input data")
    parser.add_argument("--output-type", type=str, help="The type of output data")
    parser.add_argument("--input-file", type=str, help="The path to the input file")
    parser.add_argument("--output-file", type=str, help="The path to the output file")
    args = parser.parse_args()

    # Check type and select corresponding reader/writer
    reader = BigVulReader(args.input_file)
    writer = BigVulWriter(args.output_file, reader)

    writer.write()
